
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../03_chapp__application_entry_point__/">
      
      
        <link rel="next" href="../05_controller__ui_logic_coordinator__/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Chapter 4: UI Areas (CommandArea & MessageArea) - 110-notes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#chapter-4-ui-areas-commandarea-messagearea" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="110-notes" class="md-header__button md-logo" aria-label="110-notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            110-notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Chapter 4: UI Areas (CommandArea &amp; MessageArea)
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="110-notes" class="md-nav__button md-logo" aria-label="110-notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    110-notes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial: dat110-project2-javafx-chatapp
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_message_hierarchy__communication_protocol__/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 1: Message Hierarchy (Communication Protocol)
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_client__network_interaction_logic__/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 2: Client (Network Interaction Logic)
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_chapp__application_entry_point__/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 3: Chapp (Application Entry Point)
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Chapter 4: UI Areas (CommandArea &amp; MessageArea)
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Chapter 4: UI Areas (CommandArea &amp; MessageArea)
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-dashboard-analogy" class="md-nav__link">
    <span class="md-ellipsis">
      The Dashboard Analogy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commandarea-the-control-panel" class="md-nav__link">
    <span class="md-ellipsis">
      CommandArea: The Control Panel
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messagearea-the-information-display" class="md-nav__link">
    <span class="md-ellipsis">
      MessageArea: The Information Display
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-they-fit-together" class="md-nav__link">
    <span class="md-ellipsis">
      How They Fit Together
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_controller__ui_logic_coordinator__/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 5: Controller (UI Logic Coordinator)
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_transportmessage__network_data_framing__/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 6: TransportMessage (Network Data Framing)
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_connection__network_stream_handling__/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 7: Connection (Network Stream Handling)
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../08_messageutils__serialization_deserialization__/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chapter 8: MessageUtils (Serialization/Deserialization)
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-dashboard-analogy" class="md-nav__link">
    <span class="md-ellipsis">
      The Dashboard Analogy
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commandarea-the-control-panel" class="md-nav__link">
    <span class="md-ellipsis">
      CommandArea: The Control Panel
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#messagearea-the-information-display" class="md-nav__link">
    <span class="md-ellipsis">
      MessageArea: The Information Display
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-they-fit-together" class="md-nav__link">
    <span class="md-ellipsis">
      How They Fit Together
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="chapter-4-ui-areas-commandarea-messagearea">Chapter 4: UI Areas (CommandArea &amp; MessageArea)</h1>
<p>In the <a href="../03_chapp__application_entry_point__/">previous chapter</a>, we saw how <code>Chapp</code> acts like a stage manager, setting up the main window (<code>Stage</code>) and creating the initial instances of our UI components. It brought the actors (<code>CommandArea</code>, <code>MessageArea</code>) onto the stage but didn't delve into what those actors actually <em>do</em> or how they are built.</p>
<p>Now, let's look closely at two of those main actors: <code>CommandArea</code> and <code>MessageArea</code>. Think about any chat application you've used. You usually have:</p>
<ol>
<li>A place where you type your messages, maybe choose a topic, and click "Send" or "Connect".</li>
<li>A separate area where you see the messages from other people appearing.</li>
</ol>
<p>It wouldn't make sense to mix these up, right? Having dedicated areas makes the application much easier to use. Our <code>CommandArea</code> and <code>MessageArea</code> classes define these distinct sections.</p>
<h2 id="the-dashboard-analogy">The Dashboard Analogy</h2>
<p>Imagine the dashboard of a car. You have one area with controls: the steering wheel, pedals, buttons for lights or wipers. This is where <em>you</em> interact with the car to tell it what to do. This is like our <code>CommandArea</code>.</p>
<p>Then, you have another area with displays: the speedometer, fuel gauge, warning lights. This shows you information <em>from</em> the car about its status. This is like our <code>MessageArea</code>.</p>
<p><code>CommandArea</code> and <code>MessageArea</code> are Java classes that use JavaFX elements to build these visual panels for our chat application.</p>
<h2 id="commandarea-the-control-panel"><code>CommandArea</code>: The Control Panel</h2>
<p>The <code>CommandArea</code> class (<code>CommandArea.java</code>) is responsible for creating the part of the user interface where the user gives commands or types messages. It contains all the buttons, text boxes, and labels needed for interaction.</p>
<p><strong>What's Inside?</strong></p>
<ul>
<li><strong>Buttons:</strong> For actions like "Connect", "Create Topic", "Subscribe", "Publish".</li>
<li><strong>Text Fields:</strong> For typing in the topic name or the message content.</li>
<li><strong>Labels:</strong> To display static text or simple information like the connected server or current username.</li>
<li><strong>Layout:</strong> It uses a layout pane (like <code>GridPane</code>) to arrange these elements neatly.</li>
</ul>
<p><strong>Setting up the <code>CommandArea</code></strong></p>
<p>Remember in <code>Chapp.java</code>, we saw this line:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// From Chapp.java&#39;s start() method</span>
<span class="n">carea</span><span class="p">.</span><span class="na">setupCommandArea</span><span class="p">(</span><span class="n">hbox</span><span class="p">,</span><span class="w"> </span><span class="n">controller</span><span class="p">,</span><span class="w"> </span><span class="n">marea</span><span class="p">);</span>
</code></pre></div>
<p>This calls the <code>setupCommandArea</code> method inside <code>CommandArea.java</code>. Let's look at a simplified version of what that method does:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// File: src/main/java/no/hvl/dat110/chapp/CommandArea.java (Simplified)</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">no.hvl.dat110.chapp</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">javafx.scene.control.Button</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">javafx.scene.control.TextField</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">javafx.scene.layout.GridPane</span><span class="p">;</span><span class="w"> </span><span class="c1">// For arranging elements in a grid</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">javafx.scene.layout.HBox</span><span class="p">;</span><span class="w">    </span><span class="c1">// The horizontal box from Chapp</span>
<span class="c1">// ... other imports</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CommandArea</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="n">controller</span><span class="p">;</span><span class="w"> </span><span class="c1">// Reference to the application&#39;s brain</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setupCommandArea</span><span class="p">(</span><span class="n">HBox</span><span class="w"> </span><span class="n">hbox</span><span class="p">,</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="n">controller</span><span class="p">,</span><span class="w"> </span><span class="n">MessageArea</span><span class="w"> </span><span class="n">marea</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">controller</span><span class="p">;</span><span class="w"> </span><span class="c1">// Store the controller for later use</span>

<span class="w">        </span><span class="c1">// Create a grid layout to organize controls</span>
<span class="w">        </span><span class="n">GridPane</span><span class="w"> </span><span class="n">grid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">GridPane</span><span class="p">();</span>
<span class="w">        </span><span class="n">grid</span><span class="p">.</span><span class="na">setHgap</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"> </span><span class="c1">// Horizontal spacing</span>
<span class="w">        </span><span class="n">grid</span><span class="p">.</span><span class="na">setVgap</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span><span class="w"> </span><span class="c1">// Vertical spacing</span>

<span class="w">        </span><span class="c1">// --- Example: Connect Button ---</span>
<span class="w">        </span><span class="n">Button</span><span class="w"> </span><span class="n">connectBtn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Button</span><span class="p">(</span><span class="s">&quot;Connect&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">grid</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">connectBtn</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Add button to grid at column 0, row 0</span>

<span class="w">        </span><span class="c1">// --- Example: Topic Text Field ---</span>
<span class="w">        </span><span class="n">TextField</span><span class="w"> </span><span class="n">topicField</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TextField</span><span class="p">();</span>
<span class="w">        </span><span class="n">topicField</span><span class="p">.</span><span class="na">setPromptText</span><span class="p">(</span><span class="s">&quot;Enter topic name&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// Placeholder text</span>
<span class="w">        </span><span class="n">grid</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">topicField</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// Add text field at column 1, row 1</span>

<span class="w">        </span><span class="c1">// --- Example: Create Topic Button ---</span>
<span class="w">        </span><span class="n">Button</span><span class="w"> </span><span class="n">createTopicBtn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Button</span><span class="p">(</span><span class="s">&quot;Create Topic&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="n">grid</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">createTopicBtn</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// Add button at column 0, row 1</span>

<span class="w">        </span><span class="c1">// ... (Many other buttons and fields are created and added here) ...</span>

<span class="w">        </span><span class="c1">// Finally, add the organized grid to the HBox provided by Chapp</span>
<span class="w">        </span><span class="n">hbox</span><span class="p">.</span><span class="na">getChildren</span><span class="p">().</span><span class="na">add</span><span class="p">(</span><span class="n">grid</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li><strong><code>setupCommandArea</code>:</strong> This method takes the main <code>HBox</code> (from <code>Chapp</code>), the central <code>Controller</code> (our application's brain), and the <code>MessageArea</code> as input.</li>
<li><strong><code>GridPane</code>:</strong> A handy JavaFX layout tool that arranges elements in rows and columns, like a spreadsheet.</li>
<li><strong><code>new Button(...)</code>, <code>new TextField()</code>:</strong> These lines create the actual visual components.</li>
<li><strong><code>grid.add(...)</code>:</strong> This places each component into a specific cell in the grid.</li>
<li><strong><code>hbox.getChildren().add(grid)</code>:</strong> The entire grid, filled with controls, is added to the <code>HBox</code> that <code>Chapp</code> created, making it visible in the main window layout.</li>
</ul>
<p><strong>Making Buttons Do Things</strong></p>
<p>Creating buttons is nice, but they need to <em>do</em> something when clicked! This is where the <a href="../05_controller__ui_logic_coordinator__/">Controller</a> comes in. Inside <code>setupCommandArea</code>, we also set up <em>event handlers</em>.</p>
<p>Think of an event handler as telling the button: "When someone clicks you, call this specific method in the <code>Controller</code>."</p>
<div class="highlight"><pre><span></span><code><span class="c1">// File: src/main/java/no/hvl/dat110/chapp/CommandArea.java (Simplified event handling)</span>

<span class="c1">// Inside setupCommandArea, after creating createTopicBtn and topicField</span>

<span class="n">createTopicBtn</span><span class="p">.</span><span class="na">setOnAction</span><span class="p">((</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// This code runs when createTopicBtn is clicked</span>

<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">topic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">topicField</span><span class="p">.</span><span class="na">getText</span><span class="p">();</span><span class="w"> </span><span class="c1">// Get text from the topic input field</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">topic</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Make sure the user typed something</span>
<span class="w">        </span><span class="c1">// Tell the controller to handle the &quot;create topic&quot; action</span>
<span class="w">        </span><span class="n">controller</span><span class="p">.</span><span class="na">createTopic</span><span class="p">(</span><span class="n">topic</span><span class="p">);</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Create Topic button clicked for: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">topic</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Similar setOnAction calls are made for connectBtn, subscribeBtn, publishBtn, etc.</span>
</code></pre></div>
<ul>
<li><strong><code>setOnAction(...)</code>:</strong> This is a standard JavaFX way to define what happens when a button (or other control) is interacted with.</li>
<li><strong><code>controller.createTopic(topic)</code>:</strong> This is the crucial part! The <code>CommandArea</code> doesn't know <em>how</em> to create a topic itself. It just grabs the topic name from the text field and tells the <code>Controller</code> to handle the logic. The <code>Controller</code> will then likely use the <code>Client</code> to send the appropriate message (<a href="../01_message_hierarchy__communication_protocol__/">Chapter 1</a>) to the server.</li>
</ul>
<p>So, the <code>CommandArea</code> is the user's input panel, collecting information and delegating the actual work to the <code>Controller</code>.</p>
<h2 id="messagearea-the-information-display"><code>MessageArea</code>: The Information Display</h2>
<p>The <code>MessageArea</code> class (<code>MessageArea.java</code>) builds the other main part of our UI: the section where incoming chat messages, connection confirmations, and other notifications are shown to the user.</p>
<p><strong>What's Inside?</strong></p>
<ul>
<li><strong><code>TextArea</code>:</strong> The primary component. This is a multi-line text box designed to display (and optionally edit) text. In our case, we'll mostly use it for <em>displaying</em> incoming messages.</li>
<li><strong>Labels:</strong> Maybe a title like "Messages".</li>
<li><strong>Layout:</strong> It uses a layout pane (like <code>VBox</code>) to arrange its elements.</li>
</ul>
<p><strong>Setting up the <code>MessageArea</code></strong></p>
<p>Similar to <code>CommandArea</code>, <code>Chapp.java</code> calls a setup method:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// From Chapp.java&#39;s start() method</span>
<span class="n">marea</span><span class="p">.</span><span class="na">setupMessageAera</span><span class="p">(</span><span class="n">hbox</span><span class="p">,</span><span class="w"> </span><span class="n">controller</span><span class="p">);</span>
</code></pre></div>
<p>Let's look at a simplified <code>setupMessageAera</code> method:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// File: src/main/java/no/hvl/dat110/chapp/MessageArea.java (Simplified)</span>
<span class="kn">package</span><span class="w"> </span><span class="nn">no.hvl.dat110.chapp</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">javafx.scene.control.Label</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">javafx.scene.control.TextArea</span><span class="p">;</span><span class="w"> </span><span class="c1">// The main display area</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">javafx.scene.layout.HBox</span><span class="p">;</span><span class="w">     </span><span class="c1">// The horizontal box from Chapp</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">javafx.scene.layout.VBox</span><span class="p">;</span><span class="w">     </span><span class="c1">// Vertical layout for this area</span>
<span class="c1">// ... other imports</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MessageArea</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="n">controller</span><span class="p">;</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">TextArea</span><span class="w"> </span><span class="n">messages</span><span class="p">;</span><span class="w"> </span><span class="c1">// The field where messages will appear</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setupMessageAera</span><span class="p">(</span><span class="n">HBox</span><span class="w"> </span><span class="n">hbox</span><span class="p">,</span><span class="w"> </span><span class="n">Controller</span><span class="w"> </span><span class="n">controller</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">controller</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">controller</span><span class="p">;</span>

<span class="w">        </span><span class="c1">// Create a vertical layout for this panel</span>
<span class="w">        </span><span class="n">VBox</span><span class="w"> </span><span class="n">vbox</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">VBox</span><span class="p">();</span>
<span class="w">        </span><span class="n">vbox</span><span class="p">.</span><span class="na">setPadding</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Insets</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">));</span><span class="w"> </span><span class="c1">// Add some spacing</span>

<span class="w">        </span><span class="c1">// --- A Title Label ---</span>
<span class="w">        </span><span class="n">Label</span><span class="w"> </span><span class="n">msgLabel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Label</span><span class="p">(</span><span class="s">&quot;Messages&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// --- The Main Message Display Area ---</span>
<span class="w">        </span><span class="n">messages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TextArea</span><span class="p">();</span><span class="w"> </span><span class="c1">// Create the text area</span>
<span class="w">        </span><span class="n">messages</span><span class="p">.</span><span class="na">setPrefHeight</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span><span class="w"> </span><span class="c1">// Suggest a height</span>
<span class="w">        </span><span class="n">messages</span><span class="p">.</span><span class="na">setPrefWidth</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span><span class="w">  </span><span class="c1">// Suggest a width</span>
<span class="w">        </span><span class="n">messages</span><span class="p">.</span><span class="na">setEditable</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span><span class="w"> </span><span class="c1">// User shouldn&#39;t type directly here!</span>

<span class="w">        </span><span class="c1">// Add the label and the text area to the vertical box</span>
<span class="w">        </span><span class="n">vbox</span><span class="p">.</span><span class="na">getChildren</span><span class="p">().</span><span class="na">addAll</span><span class="p">(</span><span class="n">msgLabel</span><span class="p">,</span><span class="w"> </span><span class="n">messages</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// Add this vertical box to the main HBox from Chapp</span>
<span class="w">        </span><span class="n">hbox</span><span class="p">.</span><span class="na">getChildren</span><span class="p">().</span><span class="na">add</span><span class="p">(</span><span class="n">vbox</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// ... (methods to start/stop message handling are also here) ...</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li><strong><code>setupMessageAera</code>:</strong> Takes the main <code>HBox</code> and the <code>Controller</code>.</li>
<li><strong><code>VBox</code>:</strong> A vertical layout pane. We put the "Messages" label above the <code>TextArea</code>.</li>
<li><strong><code>new TextArea()</code>:</strong> Creates the multi-line text display area.</li>
<li><strong><code>messages.setEditable(false)</code>:</strong> This is important! It prevents the user from typing directly into the message display area. Only our application logic should add text here.</li>
<li><strong><code>vbox.getChildren().addAll(...)</code>:</strong> Adds the label and the text area to our vertical layout.</li>
<li><strong><code>hbox.getChildren().add(vbox)</code>:</strong> Adds the <code>MessageArea</code>'s layout next to the <code>CommandArea</code>'s layout within the main window's <code>HBox</code>.</li>
</ul>
<p><strong>Receiving and Displaying Messages</strong></p>
<p>How does text actually appear in the <code>messages</code> TextArea? The <code>MessageArea</code> itself doesn't directly listen for network messages. That's the job of the <a href="../02_client__network_interaction_logic__/">Client</a> and the <a href="../05_controller__ui_logic_coordinator__/">Controller</a>.</p>
<p>The <code>MessageArea</code> has a helper mechanism (involving <code>MessageHandler.java</code>, which we won't detail here) that periodically asks the <code>Controller</code> if any new messages have arrived. If the <code>Controller</code> provides a message, the <code>MessageHandler</code> updates the <code>TextArea</code>.</p>
<p>A crucial part of this is starting the message handler:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// File: src/main/java/no/hvl/dat110/chapp/MessageArea.java</span>

<span class="c1">// Reference to the message handler helper task</span>
<span class="kd">private</span><span class="w"> </span><span class="n">MessageHandler</span><span class="w"> </span><span class="n">msghandler</span><span class="p">;</span>
<span class="c1">// The TextArea defined in setupMessageAera</span>
<span class="kd">private</span><span class="w"> </span><span class="n">TextArea</span><span class="w"> </span><span class="n">messages</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">startMessageHandler</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Create the handler, giving it the controller (to ask for messages)</span>
<span class="w">    </span><span class="c1">// and the messages TextArea (to update it)</span>
<span class="w">    </span><span class="n">msghandler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MessageHandler</span><span class="p">(</span><span class="n">controller</span><span class="p">,</span><span class="w"> </span><span class="n">messages</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Start the handler running in the background</span>
<span class="w">    </span><span class="n">msghandler</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">stopMessageHandler</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Method to stop the background task gracefully</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">msghandler</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">msghandler</span><span class="p">.</span><span class="na">doStop</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// --- Inside MessageHandler.java (Conceptual) ---</span>
<span class="c1">// public void doProcess() {</span>
<span class="c1">//     String message = controller.receive(); // Ask controller for new message</span>
<span class="c1">//     if (message != null) {</span>
<span class="c1">//         messages.appendText(message + &quot;\n-\n&quot;); // Add to TextArea!</span>
<span class="c1">//     }</span>
<span class="c1">//     // Wait a bit before checking again</span>
<span class="c1">// }</span>
</code></pre></div>
<ul>
<li><strong><code>startMessageHandler()</code>:</strong> This method (called at the right time, often after connecting) creates and starts the <code>MessageHandler</code>.</li>
<li><strong><code>MessageHandler</code>:</strong> This helper continuously checks with the <code>controller.receive()</code> method.</li>
<li><strong><code>messages.appendText(...)</code>:</strong> If <code>controller.receive()</code> returns a message string, the handler adds it to the end of the text already in the <code>TextArea</code>.</li>
</ul>
<p>So, the <code>MessageArea</code> primarily provides the <em>place</em> (<code>TextArea</code>) for messages to be displayed, and relies on a helper mechanism coordinated by the <code>Controller</code> to actually <em>get</em> and <em>display</em> those messages.</p>
<h2 id="how-they-fit-together">How They Fit Together</h2>
<div class="highlight"><pre><span></span><code>graph TD
    subgraph User Interface Window
        CA[CommandArea (GridPane)]
        MA[MessageArea (VBox)]
    end

    User --&gt; CA(Clicks Button, Types Text)
    CA --&gt; CTRL(Controller)
    CTRL --&gt; Client(Client: Sends Message)
    Client --&gt; Server

    Server --&gt; Client(Client: Receives Message)
    Client --&gt; CTRL(Controller: Processes Message)
    CTRL --&gt; MH(MessageHandler)
    MH --&gt; MA(Updates TextArea)

    style CA fill:#ccf,stroke:#333,stroke-width:2px
    style MA fill:#cdf,stroke:#333,stroke-width:2px
</code></pre></div>
<p>This diagram shows the flow:
1.  The User interacts with the <code>CommandArea</code>.
2.  <code>CommandArea</code> tells the <code>Controller</code> what the user did.
3.  The <code>Controller</code> uses the <code>Client</code> to talk to the Server.
4.  When messages come back from the Server via the <code>Client</code>, the <code>Controller</code> processes them.
5.  The <code>Controller</code> makes the message available to the <code>MessageHandler</code> (part of <code>MessageArea</code>'s machinery).
6.  The <code>MessageHandler</code> updates the <code>TextArea</code> inside the <code>MessageArea</code> for the user to see.</p>
<h2 id="conclusion">Conclusion</h2>
<p>We've learned that <code>CommandArea</code> and <code>MessageArea</code> are crucial for organizing our chat application's user interface into logical sections:</p>
<ul>
<li><strong><code>CommandArea</code></strong>: Acts as the <strong>control panel</strong>, providing buttons and text fields for user input. It delegates actions to the <code>Controller</code>.</li>
<li><strong><code>MessageArea</code></strong>: Acts as the <strong>display panel</strong>, primarily using a <code>TextArea</code> to show incoming messages received via the <code>Controller</code> and its helper <code>MessageHandler</code>.</li>
</ul>
<p>These classes use standard JavaFX components (<code>Button</code>, <code>TextField</code>, <code>TextArea</code>, <code>GridPane</code>, <code>VBox</code>) to build their respective parts of the UI. They are created by <code>Chapp</code> and rely heavily on the <code>Controller</code> to link user actions and incoming data to the correct behavior.</p>
<p>Now that we understand the input and output areas of our UI, it's time to look at the central coordinator that makes them work together. In the next chapter, we'll explore the <a href="../05_controller__ui_logic_coordinator__/">Controller (UI Logic Coordinator)</a>, the brain that connects the user's actions in the <code>CommandArea</code> to the underlying <code>Client</code> logic and updates the <code>MessageArea</code>.</p>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["mermaid"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>